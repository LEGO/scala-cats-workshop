(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],[,,,,,function(e,t,a){e.exports=a(19)},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),s=a.n(c),u=a(1),l=a(4),m={username:"",client:null},i=r.a.createContext(m),o=function(e){var t=e.username,a=e.children;return m.client=new l.w3cwebsocket("ws://127.0.0.1:4000/chat?username=".concat(t)),m.username=t,r.a.createElement(i.Provider,{value:m},a)},f=(a(13),function(e){var t=e.createUser,a=Object(n.useState)(""),c=Object(u.a)(a,2),s=c[0],l=c[1];return r.a.createElement("div",{className:"modal-overlay"},r.a.createElement("div",{className:"modal-wrapper"},r.a.createElement("h2",null,"Insert your username"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(s),l("")}},r.a.createElement("input",{type:"text",placeholder:"your username",value:s,minLength:1,required:!0,autoFocus:!0,onChange:function(e){e.preventDefault(),l(e.target.value)}}))))}),E=(a(14),function(e){var t=e.username,a=e.users;return r.a.createElement("div",{className:"users"},r.a.createElement("div",null,"@",t),r.a.createElement("h3",null,"users"),r.a.createElement("div",null,a.map((function(e,t){return r.a.createElement("p",{key:t},e)}))))}),p=(a(15),function(e){var t,a=e.data;return r.a.createElement("div",{className:"message"},r.a.createElement("div",{className:"message-handler"},r.a.createElement("span",{className:"message-handler-user"},a.username),r.a.createElement("span",{className:"message-handler-date"},(t=a.timestamp,new Date(1e3*t).toLocaleTimeString()))),r.a.createElement("div",{className:"message-text"},r.a.createElement("span",null,a.text)))}),v=function(){var e=Object(n.useContext)(i).client,t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],s=a[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.send(JSON.stringify({text:c})),s("")}},r.a.createElement("input",{type:"text",placeholder:"write to chat..",value:c,minLength:1,required:!0,autoFocus:!0,onChange:function(e){e.preventDefault(),s(e.target.value)}}))},d=(a(16),function(e){var t=e.messages,a=Object(n.useRef)();return Object(n.useEffect)((function(){a.current.scrollIntoView({behavior:"smooth"})}),[t]),r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat-messages"},t.map((function(e,t){return r.a.createElement(p,{key:t,data:e})})),r.a.createElement("div",{ref:a})),r.a.createElement("div",{className:"chat-input"},r.a.createElement(v,null)))}),h=(a(17),function(){var e=Object(n.useContext)(i),t=e.client,a=e.username,c=Object(n.useState)([]),s=Object(u.a)(c,2),l=s[0],m=s[1],o=Object(n.useState)([]),f=Object(u.a)(o,2),p=f[0],v=f[1];return Object(n.useEffect)((function(){t.onmessage=function(e){var t=JSON.parse(e.data);console.log("chat app",t),t.UserJoined&&m(t.UserJoined.userList),t.UserLeft&&m(t.UserLeft.userList),t.Message&&v(p.concat(t.Message))}}),[t,p]),r.a.createElement("div",{className:"chat-app"},r.a.createElement(E,{username:a,users:l}),r.a.createElement(d,{messages:p}))}),g=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,""===a?r.a.createElement(f,{createUser:c}):r.a.createElement(o,{username:a},r.a.createElement(h,null)))};a(18);s.a.render(r.a.createElement(g,null),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.629c7126.chunk.js.map